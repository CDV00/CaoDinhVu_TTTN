@model Entities.DTOs.ProfileSetting

@{
    ViewData["Title"] = "Edit";
    Layout = "~/Areas/Admin/Views/Share/_layoutAdmin.cshtml";
}

@section footer{
    <script src="~/Content/Js/districts.min.js"></script>


    <script type="text/javascript">
        if (address_2 = localStorage.getItem('address_2_saved')) {
            $('select[name="Huyen"] option').each(function () {
                if ($(this).text() == address_2) {
                    $(this).attr('selected', '')
                }
            })
            $('input.billing_address_2').attr('value', address_2)
        }
        if (district = localStorage.getItem('district')) {
            $('select[name="Huyen"]').html(district)
            $('select[name="Huyen"]').on('change', function () {
                var target = $(this).children('option:selected')
                target.attr('selected', '')
                $('select[name="Huyen"] option').not(target).removeAttr('selected')
                address_2 = target.text()
                $('input.billing_address_2').attr('value', address_2)
                district = $('select[name="Huyen"]').html()
                localStorage.setItem('district', district)
                localStorage.setItem('address_2_saved', address_2)
            })
        }
        $('select[name="Tinh"]').each(function () {
            var $this = $(this),
                stc = ''
            c.forEach(function (i, e) {
                e += +1
                stc += '<option value="' + i + '">' + i + '</option>'
                $this.html('<option value="">@Model.Province</option>' + stc)
                if (address_1 = localStorage.getItem('address_1_saved')) {
                    $('select[name="Tinh"] option').each(function () {
                        if ($(this).text() == address_1) {
                            $(this).attr('selected', '')
                        }
                    })
                    $('input.billing_address_1').attr('value', address_1)
                }
                $this.on('change', function (i) {
                    i = $this.children('option:selected').index() - 1
                    var str = '',
                        r = $this.val()
                    if (r != '') {
                        arr[i].forEach(function (el) {
                            str += '<option value="' + el + '">' + el + '</option>'
                            $('select[name="Huyen"]').html('<option value="">Quận / Huyện</option>' + str)
                        })
                        var address_1 = $this.children('option:selected').text()
                        var district = $('select[name="Huyen"]').html()
                        localStorage.setItem('address_1_saved', address_1)
                        localStorage.setItem('district', district)
                        $('select[name="Huyen"]').on('change', function () {
                            var target = $(this).children('option:selected')
                            target.attr('selected', '')
                            $('select[name="Huyen"] option').not(target).removeAttr('selected')
                            var address_2 = target.text()
                            $('input.billing_address_2').attr('value', address_2)
                            district = $('select[name="Huyen"]').html()
                            localStorage.setItem('district', district)
                            localStorage.setItem('address_2_saved', address_2)
                        })
                    } else {
                        $('select[name="Huyen"]').html('<option value="">@Model.District</option>')
                        district = $('select[name="Huyen"]').html()
                        localStorage.setItem('district', district)
                        localStorage.removeItem('address_1_saved', address_1)
                    }
                })
            })
        })






    </script>
}
<script>

    $(function () {

        $("input[name='gender']").change(function () {
            var gender = $(this).val();
            var genders = $("#gender").val();
            $("#gender").val(gender);
            var genderss = $("#gender").val();
        });

    });
</script>

@Html.Raw(ViewBag.Error)
@using (Html.BeginForm("EditPost", "Users", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    @Html.HiddenFor(model => model.Id)

    <section class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <strong class="text-danger text-uppercase">CHỈNH SƯA THÔNG TIN: <span class="text-black">@Model.AppUser.Fullname</span> </strong>
                </div>
                <div class="col-sm-6 text-right">

                    <a href="@Url.Action("Index", "Users")" class="btn btn-info"><i class="fas fa-chevron-left"></i> Quay lại</a>
                    <button class="btn btn-success" type="submit"><i class="fas fa-save"></i> Lưu[Thay đổi]</button>
                </div>
            </div>
        </div><!-- /.container-fluid -->
    </section>
    <!--ddddddd-->


    <div class="form-horizontal">
        <div class="form-row">
            <div class="col form-group">
                <label>Họ & Tên</label>
                <input type="text" required name="fullName" class="form-control" value="@Model.AppUser.Fullname" placeholder="">
            </div> <!-- form-group end.// -->
            <div class="col form-group">
                <label>Tên Tài Khoản</label>
                <input type="text" required name="userName" class="form-control" value="@Model.AppUser.UserName" placeholder="">
            </div> <!-- form-group end.// -->
        </div> <!-- form-row end.// -->
        <div class="form-group">
            <label>Email</label>
            <input type="email" required class="form-control" name="Email" value="@Model.AppUser.Email" placeholder="">
            <small class="form-text text-muted">We'll never share your email with anyone else.</small>
        </div> <!-- form-group end.// -->
        <div class="form-group">

            <label class="custom-control custom-radio custom-control-inline">
                <input id="Nam" class="custom-control-input" checked="" type="radio" name="gender" value="Nam">
                <span class="custom-control-label"> Nam </span>
            </label>
            <label class="custom-control custom-radio custom-control-inline">
                <input id="Nu" class="custom-control-input" type="radio" name="gender" value="Nữ">
                <span class="custom-control-label"> Nữ </span>
            </label>
            @*<script>
                </script>*@
            <input type="text" hidden name="genders" id="gender" value="Nam" />
            <script>
            if ('@Model.AppUser.Gender' != "Nam") {
                $("#Nu").prop("checked", true);
                $("#Nam").prop("checked", false);
                $("#gender").val("Nữ");
            }
            </script>
        </div> <!-- form-group end.// -->
        <div class="form-row">
            <div class="form-group col-md-6">
                <label>Tỉnh / Thành phố</label>
                <select name="Tinh" class="w-100 h-75 opacity-50" required="">
                    <option value="">Tùy chọn</option>
                </select>
                <input class="billing_address_1" name="" type="hidden" value="">
            </div>
            <div class="form-group col-md-6">
                <label>Quận / Huyện</label>
                <select name="Huyen" class="w-100 h-75 opacity-50" required="">
                    <option value="">Tuy chọn</option>
                </select>
                <input class="billing_address_2" name="" type="hidden" value="">
            </div>
            <div class="mt-3 form-group col-md-6">
                <label>Phường/Xã/Thị trấn</label>
                <input type="text" required name="phuong" value="@Model.wards" class="form-control" placeholder='Chọn phường/ xã/ thị trấn' />
            </div>
            <div class="mt-3 form-group col-md-6">
                <label>Số nhà, tổ, khu phố</label>
                <input type="text" required name="soNha" value="@Model.SpecificAddress" class="form-control" placeholder='chọn số nhà, tổ, khu phố/ thôn/ ấp ' />
            </div>
        </div>
        <div class="form-group">
            <label>Trạng thái</label>
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.AppUser.Status, new[] { new SelectListItem { Text = "Lock", Value = "2" }, new SelectListItem { Text = "Active", Value = "1" } }, "Trạng thái", new { @class = "form-control", @name = "status" })
                @Html.ValidationMessageFor(model => model.AppUser.Status, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            <label>Vai trò</label>
            <div class="col-md-10">
                @Html.DropDownListFor(model => model.AppUser.Role, new[] { new SelectListItem { Text = "Super Addmin", Value = "3" }, new SelectListItem { Text = "Quản lý", Value = "2" }, new SelectListItem { Text = "Khách hàng", Value = "1" } }, "Vai trò", new { @class = "form-control", @name = "role" })
                @Html.ValidationMessageFor(model => model.AppUser.Role, "", new { @class = "text-danger" })
            </div>
        </div>



    </div>
}


